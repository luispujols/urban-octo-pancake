@using SocOps.Models

<button
    @onclick="OnClick"
    disabled="@Square.IsFreeSpace"
    class="@GetCssClasses()"
    aria-pressed="@Square.IsMarked"
    aria-label="@(Square.IsFreeSpace ? "Free space" : Square.Text)">
    <span class="wrap-break-word hyphens-auto">@Square.Text</span>
    @if (Square.IsMarked && !Square.IsFreeSpace)
    {
        <span class="absolute top-0.5 right-0.5 text-green-600 text-xs">âœ“</span>
    }
</button>

@code {
    [Parameter]
    public BingoSquareData Square { get; set; } = null!;

    [Parameter]
    public bool IsWinning { get; set; }

    [Parameter]
    public EventCallback OnClick { get; set; }

    private string GetCssClasses()
    {
        var baseClasses = "relative flex items-center justify-center p-1 text-center border border-gray-300 rounded transition-all duration-150 select-none min-h-[60px] text-xs leading-tight";

        var stateClasses = Square.IsMarked
            ? IsWinning
                ? "bg-amber-200 border-amber-400 text-amber-900"
                : "bg-marked border-marked-border text-green-800"
            : "bg-white text-gray-700 active:bg-gray-100";

        var freeSpaceClasses = Square.IsFreeSpace ? "font-bold text-sm" : "";

        return $"{baseClasses} {stateClasses} {freeSpaceClasses}";
    }
}
