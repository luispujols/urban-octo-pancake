@using SocOps.Models

<button
    @onclick="OnClick"
    disabled="@Square.IsFreeSpace"
    class="@GetCssClasses()"
    aria-pressed="@Square.IsMarked"
    aria-label="@(Square.IsFreeSpace ? "Free space" : Square.Text)">
    <span class="wrap-break-word hyphens-auto">@Square.Text</span>
    @if (Square.IsMarked && !Square.IsFreeSpace)
    {
        <span class="absolute top-0.5 right-0.5 text-cyan text-xs neon-text">âœ“</span>
    }
</button>

@code {
    [Parameter]
    public BingoSquareData Square { get; set; } = null!;

    [Parameter]
    public bool IsWinning { get; set; }

    [Parameter]
    public EventCallback OnClick { get; set; }

    private string GetCssClasses()
    {
        var baseClasses = "cyber-square relative flex items-center justify-center p-1 text-center rounded transition-all duration-300 select-none min-h-[60px] text-xs leading-tight text-white";

        var stateClasses = Square.IsMarked
            ? IsWinning
                ? "cyber-square winning text-magenta"
                : "cyber-square marked text-cyan"
            : "";

        var freeSpaceClasses = Square.IsFreeSpace ? "font-bold text-sm text-cyan neon-text" : "";

        return $"{baseClasses} {stateClasses} {freeSpaceClasses}";
    }
}
